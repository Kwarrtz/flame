# Flame

This is a Rust implementation of the fractal flame algorithm for generating fractal-like images, as described in [this paper](http://flam3.com/flame_draves.pdf) by Scott Draves and Erik Reckase. The flame algorithm is itself an extension of a another method of generating fractals, known as [linear iterated function systems](https://en.wikipedia.org/wiki/Iterated_function_system) or IFS. Below is an example of an image generated by this software.

[[https://github.com/Kwarrtz/flame/blob/master/examples/1.png]]

In this implementation, flames are specified using a JSON file. For a description of the format expected by the program, see the section below. For help on using the command line utility, compile the binary and execute it with the `--help` flag.

This is a personal and entirely unofficial project. It is currently highly unstable and not intended for public use. If you actually want to experiment with creating your own fractal flames, I'd instead suggest checking out one of the pieces of software linked to on [the official flame website](https://flam3.com). All credit for the algorithm implemented here goes to Scott Draves and his colleagues.

## Features

Currently, this is only a partial implementation of the algorithm described in Draves' paper. The supported features are:

* Linear IFS
* A subset of the non-linear variations described in the appendix
* Log density plotting
* Gamma correction

While the yet to be implemented features are:

* Linear post transforms (for changing coordinates)
* Coloring
* Anti-aliasing or density estimation
* Symmetry
* Many of the variations, in particular those that are dependent on random parameters or the coefficients of the transformation

## The Input Format

Flames are described by a dictionary with three fields:

* `"bounds"` -- A length 4 list of floating point values, describing the bounds of the region of the plane to actually be plotted. The order is `x_min, x_max, y_min, y_max`.

* `"last"` -- A string containing the name of a variation to be applied to the point after every iteration of the chaos game (called the final transform in the linked paper).

* `"functions"` -- An arbitrary length list of functions. Each function is itself a list containing three elements: the frequency with which that function should be called (must add to 1), the variation (again a string), and the initial affine transformation. The affine transformation is _itself_ described by a list of length 6 (lists within lists within lists, oh my!), the first four elements of which are the coefficients of the 2x2 matrix comprising the linear part of the transformation, and the last two elements of which are the components of the translation.

Below is the file which generates the fractal flame shown above.

```
{
  "bounds": [-3.0,3.0,-6.0,6.0],
  "last": "Id",
  "functions": [
    [0.60, "Tangent", [0.65,0.08,-0.08,0.85,0.0,1.3]],
    [0.35, "Handkerchief", [0.2,-0.26,0.23,0.22,0.0,1.8]],
    [0.05, "Disc", [-0.15,0.30,0.26,0.24,0.05,0.34]]
  ]
}
```
